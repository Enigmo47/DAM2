import java.io.EOFException;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.util.ArrayList;
import java.util.List;

public class AccesoVideojuegoBinario {
	public static final String NOMBRE_FICHERO_VIDEOJUEGOS = "data/videojuegos.dat";
	public static List<Videojuego> leerVideojuegos() throws IOException, ClassNotFoundException{
		ObjectInputStream flujoEntrada = null;
		List<Videojuego> listaVideojuegos = new ArrayList<>();
		boolean finalFichero = false;
		try {
			flujoEntrada = new ObjectInputStream(new FileInputStream(NOMBRE_FICHERO_VIDEOJUEGOS));
			while (!finalFichero) {
				try {
					Videojuego videojuego = (Videojuego) flujoEntrada.readObject();
					listaVideojuegos.add(videojuego);
				}
				catch (EOFException eofe) {
					finalFichero = true;
				}
			}
		}
		finally {
			if(flujoEntrada != null)
				flujoEntrada.close();	
		}
  		return listaVideojuegos;
	}
}
